<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è´¨æ•°åˆ¤æ–­å°æ¸¸æˆ</title>
  <style>
    :root {
      --main-bg: #fefce8;
      --code-bg: #fff3cd;
      --highlight-bg: #ffeeba;
      --highlight-color: #d63384;
      --accent: #f59e0b;
      --text-color: #3f3f46;
      --title-font: 'Comic Sans MS', cursive, sans-serif;
    }
    body {
      margin: 0;
      font-family: var(--title-font);
      background: var(--main-bg);
      color: var(--text-color);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h2 {
      color: var(--accent);
      font-size: 2.2rem;
      margin-bottom: 1rem;
      text-align: center;
    }
    .code-block {
      background: var(--code-bg);
      color: #000;
      font-family: 'Courier New', monospace;
      padding: 1rem;
      border-radius: 12px;
      width: 100%;
      max-width: 750px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      white-space: pre-wrap;
      line-height: 1.5;
      margin-bottom: 1rem;
    }
    .code-block span {
      display: block;
    }
    .highlight {
      background-color: var(--highlight-bg);
      color: var(--highlight-color);
      padding-left: 0.5rem;
      border-left: 5px solid var(--highlight-color);
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 1rem 0;
    }
    input[type="number"] {
      padding: 10px;
      font-size: 16px;
      width: 100px;
      border: 2px dashed var(--accent);
      border-radius: 10px;
      text-align: center;
    }
    button {
      background-color: var(--accent);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px 16px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    button:hover {
      background-color: #d97706;
    }
    .output {
      background: #fff;
      border-left: 6px solid var(--accent);
      padding: 12px 16px;
      border-radius: 10px;
      max-width: 750px;
      font-size: 17px;
      line-height: 1.6;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h2>ğŸ¯ è°æ˜¯è´¨æ•°å°ä¾¦æ¢ï¼Ÿ</h2>

  <div class="code-block" id="code">
<span>// ğŸ‘‡ çœ‹çœ‹è¿™æ®µ C++ ç¨‹åºæ€ä¹ˆåˆ¤æ–­è´¨æ•°å§ï¼</span>
<span>#include &lt;iostream&gt;</span>
<span>#include &lt;cmath&gt;</span>
<span>using namespace std;</span>
<span></span>
<span>bool isPrime(int n) {</span>
<span>    if (n &lt; 2) return false;  // å°äº 2 çš„ä¸æ˜¯è´¨æ•°å“¦</span>
<span>    int limit = sqrt(n);     // å¼€å¹³æ–¹æ‰¾èŒƒå›´</span>
<span>    for (int i = 2; i &lt;= limit; i++) {</span>
<span>        if (n % i == 0) return false;  // æœ‰æ•´é™¤çš„å°±ä¸æ˜¯è´¨æ•°ï¼</span>
<span>    }</span>
<span>    return true;  // è¿‡äº”å…³æ–©å…­å°†ï¼Œæ˜¯çœŸæ­£çš„è´¨æ•°ï¼</span>
<span>}</span>
  </div>

  <div class="controls">
    <label for="inputN">ğŸ§® è¾“å…¥ä¸€ä¸ªæ•°å­— nï¼š</label>
    <input type="number" id="inputN" value="17" />
    <button onclick="startDemo()">ğŸš€ å¼€å§‹æ¼”ç¤º</button>
    <button onclick="runAnimation()">â¡ï¸ ä¸‹ä¸€æ­¥</button>
  </div>

  <div class="output" id="output">
    å°æœ‹å‹ï¼Œè¯·ç‚¹å‡»â€œå¼€å§‹æ¼”ç¤ºâ€è¾“å…¥æ•°å­— nï¼Œç„¶åç‚¹â€œä¸‹ä¸€æ­¥â€è§‚å¯Ÿæ¯ä¸€æ­¥å‘ç”Ÿäº†ä»€ä¹ˆå“¦ï¼
  </div>

  <script>
    const steps = [
      { line: 4, msg: n => `ğŸ” å°ä¾¦æ¢å‡ºåŠ¨ï¼æˆ‘ä»¬å¼€å§‹åˆ¤æ–­ ${n} æ˜¯ä¸æ˜¯è´¨æ•°ï¼` },
      { line: 5, msg: n => n < 2 ? `ğŸš« æ•°å­— ${n} å¤ªå°å•¦ï¼Œè´¨æ•°å¿…é¡»æ˜¯ 2 æˆ–æ›´å¤§ï¼æ‰€ä»¥ä¸æ˜¯è´¨æ•°ã€‚` : `âœ… ${n} çœ‹èµ·æ¥æœ‰å¸Œæœ›ï¼Œæˆ‘ä»¬ç»§ç»­æ£€æŸ¥ï¼` },
      { line: 6, msg: n => `ğŸ“ æˆ‘ä»¬ç”¨å¼€å¹³æ–¹æ¥ç¼©å°åˆ¤æ–­èŒƒå›´ï¼šlimit = sqrt(${n}) â‰ˆ ${Math.floor(Math.sqrt(n))}` },
      { line: 7, msg: n => `ğŸ” ä» i = 2 å¼€å§‹ï¼Œçœ‹æœ‰æ²¡æœ‰æ•°å¯ä»¥æ•´é™¤ ${n}` },
      { line: 8, msg: n => {
        for (let i = 2; i <= Math.floor(Math.sqrt(n)); i++) {
          if (n % i === 0) return `ğŸ˜µ ç³Ÿç³•ï¼${n} å¯ä»¥è¢« ${i} æ•´é™¤ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯è´¨æ•°ï¼`;
        }
        return `ğŸ‰ å¤ªæ£’äº†ï¼${n} æ²¡æœ‰è¢«ä»»ä½•æ•°æ•´é™¤ï¼Œå®ƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„è´¨æ•°ï¼`;
      }},
      { line: 10, msg: n => { function isPrime(num) { if (num < 2) return false; const limit = Math.sqrt(num); for (let i = 2; i <= limit; i++) { if (num % i === 0) return false; } return true; } return `ğŸ åˆ¤æ–­ç»“æŸï¼š${n} ${isPrime(n) ? 'æ˜¯' : 'ä¸æ˜¯'}è´¨æ•°ï¼Œä»»åŠ¡å®Œæˆï¼ğŸ‘`; }}
    ];

    let currentStep = 0;
    let n = 17;
    const codeLines = document.querySelectorAll("#code span");
    const outputDiv = document.getElementById("output");

    function startDemo() {
      const val = document.getElementById("inputN").value;
      if (val === "") {
        alert("è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°ã€‚");
        return;
      }
      n = parseInt(val);
      currentStep = 0;
      codeLines.forEach(line => line.classList.remove("highlight"));
      outputDiv.innerHTML = `ğŸ¬ è¾“å…¥çš„æ•°å­—æ˜¯ ${n}ï¼Œç°åœ¨å‡†å¤‡å¼€å§‹åˆ¤æ–­å•¦ï¼Œè¯·ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€å§ï¼`;
    }

    function runAnimation() {
      if (typeof n === "undefined") {
        outputDiv.innerHTML = "âš ï¸ è¯·å…ˆè¾“å…¥ n å¹¶ç‚¹å‡»â€œå¼€å§‹æ¼”ç¤ºâ€ã€‚";
        return;
      }

      if (currentStep > 0) {
        codeLines[steps[currentStep - 1].line].classList.remove("highlight");
      }

      if (currentStep >= steps.length) {
        outputDiv.innerHTML = "âœ… æ¼”ç¤ºç»“æŸï¼Œåšå¾—æ£’æ£’çš„ï¼ğŸ‘ æƒ³å†è¯•ä¸€æ¬¡å¯ä»¥é‡æ–°è¾“å…¥æ•°å­—å“¦ï¼";
        return;
      }

      codeLines[steps[currentStep].line].classList.add("highlight");
      outputDiv.innerHTML = steps[currentStep].msg(n);
      currentStep++;
    }
  </script>
</body>
</html>
