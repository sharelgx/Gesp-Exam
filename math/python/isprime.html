<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>质数判断演示器 - 仅结果区</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Comic Sans MS',cursive;}
body{background:linear-gradient(135deg,#fad0c4 0%,#ffd1ff 100%);min-height:100vh;padding:20px;}
.container{max-width:800px;margin:0 auto;background:#fff;border-radius:25px;padding:30px;box-shadow:0 15px 35px rgba(0,0,0,.1);}
h1{text-align:center;color:#2d3748;margin-bottom:15px;font-size:2.2em;}
.code-box{background:#2d3748;color:#e2e8f0;border-radius:15px;padding:20px;font-size:16px;line-height:1.6;overflow-x:auto;white-space:pre;}
.line{padding:0;border-radius:3px;transition:all .3s;}
.highlight{background:#4ade80;color:#1a202c;}
.controls{display:flex;gap:15px;align-items:center;justify-content:center;margin:20px 0;flex-wrap:wrap;}
button{padding:10px 25px;font-size:18px;border:none;border-radius:25px;cursor:pointer;font-weight:bold;transition:.3s;box-shadow:0 4px 15px rgba(0,0,0,.2);}
.demo{background:linear-gradient(45deg,#ff6b6b,#ff8787);color:#fff;}
.reset{background:linear-gradient(45deg,#4ecdc4,#44a08d);color:#fff;}
button:hover{transform:translateY(-3px);box-shadow:0 6px 20px rgba(0,0,0,.3);}
.slider-box label{font-size:16px;font-weight:bold;color:#2d3748;}
.slider{width:200px;height:8px;border-radius:5px;background:#e2e8f0;outline:none;cursor:pointer;}
.result-list{max-height:600px;overflow-y:auto;background:#fff;border:2px solid #e2e8f0;border-radius:15px;padding:15px;margin-top:15px;}
.result-item{background:linear-gradient(45deg,#ff9a9e,#fad0c4);color:#fff;padding:8px 15px;margin:4px 0;border-radius:20px;font-size:15px;animation:slide .5s;}
@keyframes slide{from{opacity:0;transform:translateX(-30px);}to{opacity:1;transform:translateX(0);}}
.status{font-size:20px;font-weight:bold;text-align:center;color:#2d3748;margin:10px 0;}
</style>
</head>
<body>
<div class="container">
  <div class="left">
    <h1>🔍 Python 代码区</h1>
    <pre class="code-box" id="codeBox">
<span class="line" id="L1">import math</span>
<span class="line" id="L2"></span>
<span class="line" id="L3">for num in range(2, 101):</span>
<span class="line" id="L4">    is_prime = True</span>
<span class="line" id="L5">    for i in range(2, int(math.sqrt(num)) + 1):</span>
<span class="line" id="L6">        if num % i == 0:</span>
<span class="line" id="L7">            is_prime = False</span>
<span class="line" id="L8">            break</span>
<span class="line" id="L9">    if is_prime:</span>
<span class="line" id="L10">        print(f"{num} 是质数")</span>
    </pre>

    <div class="controls">
      <button class="demo" onclick="startDemo()">🐢 开始演示</button>
      <button class="reset" onclick="resetDemo()">🔄 重置</button>
      <div class="slider-box">
        <label>速度：</label>
        <input type="range" id="speedSlider" class="slider" min="50" max="2000" value="400">
      </div>
    </div>
    <div class="status" id="statusText">准备就绪！</div>

    <!-- 仅保留结果区域 -->
    <div class="result-list" id="results"></div>
  </div>
</div>

<script>
const results = document.getElementById('results');
const status  = document.getElementById('statusText');
const slider  = document.getElementById('speedSlider');
const lines   = document.querySelectorAll('.line');

let running = false;
let delay   = 400;

slider.addEventListener('input', e => delay = parseInt(e.target.value));

function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
function hl(n){lines.forEach(l=>l.classList.remove('highlight'));if(n)lines[n-1].classList.add('highlight');}

function addResult(num){
  const div=document.createElement('div');
  div.className='result-item';
  div.textContent=`${num} 是质数`;
  results.appendChild(div);
  results.scrollTop=results.scrollHeight;
}

async function startDemo(){
  if(running) return;
  running=true;
  resetDemo();
  hl(3);
  await sleep(delay);
  for(let num=2;num<=100;num++){
    hl(4);
    status.textContent=`正在检查 num = ${num}`;
    await sleep(delay*0.5);
    let isPrime=true;
    const limit=Math.floor(Math.sqrt(num));
    for(let i=2;i<=limit;i++){
      hl(5);
      if(num%i===0){
        isPrime=false;
        hl(7);
        break;
      }
    }
    if(isPrime){
      hl(9);
      status.textContent=`🎉 发现：${num} 是质数`;
      addResult(num);
      await sleep(delay*1.5);
    }
  }
  hl(10);
  status.textContent='✅ 探索完成！';
  running=false;
}

function resetDemo(){
  running=false;
  results.innerHTML='';
  hl();
  status.textContent='准备就绪！';
}

/* 初始空列表 */
</script>
</body>
</html>